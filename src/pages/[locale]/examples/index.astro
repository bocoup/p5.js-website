---
import {
  getCollectionInLocaleWithFallbacks,
  transformExampleSlugs,
} from "@pages/_utils";
import ExamplesLayout from "@layouts/ExamplesLayout.astro";
import { nonDefaultSupportedLocales } from "@/const";

export async function getStaticPaths() {
  const pages = nonDefaultSupportedLocales.map(async (locale) => ({
    params: {
      locale,
    },
  }));

  return await Promise.all(pages);
}

const { locale } = Astro.params;

// Merge the locale entries with the filtered default entries
const entries = transformExampleSlugs<"examples">(
  await getCollectionInLocaleWithFallbacks("examples", locale)
);
---

<ExamplesLayout exampleEntries={entries} />
