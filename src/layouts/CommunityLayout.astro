---
import type { CollectionEntry } from "astro:content";
import { removeLocalePrefix, makeReferencePageSlug } from "../pages/_utils";
import BaseLayout from "./BaseLayout.astro";

interface Props {
  sketches: CollectionEntry<"sketches">[];
  libraries: CollectionEntry<"libraries">[];
  pastEvents: CollectionEntry<"past-events">[];
}

const { sketches, libraries, pastEvents } = Astro.props;
console.log(sketches);
---

<BaseLayout title="Community">
  <h2>Sketches</h2>
  {
    sketches.map((entry) => (
      <li>
        <a
          href={`/${sketches}/${removeLocalePrefix(makeReferencePageSlug(entry.id))}`}
        >
          {removeLocalePrefix(makeReferencePageSlug(entry.id))}
        </a>
      </li>
    ))
  }

  <h2>Libraries</h2>
  {
    libraries.map((entry) => (
      <li>
        <a href={entry.data.websiteUrl ?? entry.data.sourceUrl}>
          {removeLocalePrefix(makeReferencePageSlug(entry.id))}
        </a>
      </li>
    ))
  }

  <h2>Past Events</h2>
  {
    pastEvents.map((entry) => (
      <li>
        <a
          href={`/past-events/${removeLocalePrefix(makeReferencePageSlug(entry.id))}`}
        >
          {removeLocalePrefix(makeReferencePageSlug(entry.id))}
        </a>
      </li>
    ))
  }
</BaseLayout>
