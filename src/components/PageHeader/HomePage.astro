---
import type { CollectionEntry } from "astro:content";
import { Icon } from "../Icon";

interface Props {
  config: CollectionEntry<"homepage">;
}
const { config } = Astro.props;
---

<div class="px-lg pt-5xl lg:pt-3xl pb-0 h-full">
  <div class="homepage-header-top">
    <div class="grid grid-cols-3 lg:grid-cols-4 gap-md overflow-hidden h-min">
      <p class="col-span-2 lg:col-span-3 mt-0 text-md md:text-xl lg:text-3xl">
        {config.data.heroText}
      </p>
      <Icon
        kind="asterisk-thick"
        className="col-span-1 motion-safe:animate-spin-slow text-logo-color h-full max-w-full"
      />
    </div>
    <p class="text-body-caption pb-sm mt-0">{config.data.heroImageCaption}</p>
  </div>
  <img
    class="full-bleed-image"
    src={config.data.heroImageDesktop.src}
    alt={config.data.heroImageAltText}
    loading="eager"
  />
  {
    [
      config.data.heroImageMobile.src,
      config.data.heroImageMobile.src,
      config.data.heroImageMobile.src,
    ].map((src) => (
      <img
        class="full-bleed-image hidden"
        src={src}
        alt={config.data.heroImageAltText}
        loading="lazy"
      />
    ))
  }
</div>

<script>
  document.addEventListener("DOMContentLoaded", (event) => {
    const images = document.querySelectorAll("img.full-bleed-image");
    images[0].classList.add("hidden");
    images[Math.round(Math.random() * images.length)].classList.remove(
      "hidden"
    );
  });
</script>
